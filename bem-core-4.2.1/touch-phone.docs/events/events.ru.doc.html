<h1 id="events-2"><a href="#events-2" class="anchor"></a>events</h1>
<p>Блок предоставляет набор JS-классов, реализующий механизмы работы с событиями.</p>
<h2 id="Обзор-19"><a href="#Обзор-19" class="anchor"></a>Обзор</h2>
<h3 id="Классы-предоставляемые-блоком-1"><a href="#Классы-предоставляемые-блоком-1" class="anchor"></a>Классы, предоставляемые блоком</h3>
<div class="table-container"><table>
<thead>
<tr>
<th>Класс</th>
<th>Конструктор</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#class-Event">Event</a></td>
<td>Event(<br><code>type {String}</code>, <br><code>target {Object}</code>)</td>
<td>Служит для создания объекта события, изменения и проверки его состояний.</td>
</tr>
<tr>
<td><a href="#class-Emitter">Emitter</a></td>
<td>-</td>
<td>Служит для генерации событий и подписки на них.</td>
</tr>
</tbody>
</table>
</div><h3 id="Свойства-и-методы-объекта-класса-3"><a href="#Свойства-и-методы-объекта-класса-3" class="anchor"></a>Свойства и методы объекта класса</h3>
<div class="table-container"><table>
<thead>
<tr>
<th>Класс</th>
<th>Имя</th>
<th>Тип или возвращаемое значение</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#class-Event">Event</a></td>
<td><a href="#fields-type">type</a></td>
<td><code>String</code></td>
<td>Тип события.</td>
</tr>
<tr>
<td></td>
<td><a href="#fields-result">result</a></td>
<td><code>*</code></td>
<td>Результат, возвращенный последним обработчиком события.</td>
</tr>
<tr>
<td></td>
<td><a href="#fields-target">target</a></td>
<td><code>Object</code></td>
<td>Объект на котором возникло событие.</td>
</tr>
<tr>
<td></td>
<td><a href="#fields-data">data</a></td>
<td><code>*</code></td>
<td>Данные, передаваемые как аргумент обработчику.</td>
</tr>
<tr>
<td></td>
<td><a href="#fields-preventDefault">preventDefault</a>()</td>
<td>-</td>
<td>Позволяет предотвратить выполнение стандартного действия предусмотренного для события.</td>
</tr>
<tr>
<td></td>
<td><a href="#fields-isDefaultPrevented">isDefaultPrevented</a>()</td>
<td><code>Boolean</code></td>
<td>Проверяет, было ли предотвращено выполнение стандартного действия, предусмотренного для события.</td>
</tr>
<tr>
<td></td>
<td><a href="#fields-stopPropagation">stopPropagation</a>()</td>
<td>-</td>
<td>Позволяет остановить всплывание события.</td>
</tr>
<tr>
<td></td>
<td><a href="#fields-isPropagationStopped">isPropagationStopped</a>()</td>
<td><code>Boolean</code></td>
<td>Проверяет, было ли остановлено всплывание события.</td>
</tr>
<tr>
<td><a href="#class-Emitter">Emitter</a></td>
<td><a href="#fields-on">on</a>(<br><code>type {String}</code>, <br><code>[data {Object}]</code>, <br><code>fn {Function}</code>, <br><code>[ {Object} ctx]</code>)</td>
<td>-</td>
<td>Служит для подписки на событие определенного типа.</td>
</tr>
<tr>
<td></td>
<td><a href="#fields-once">once</a>(<br><code>type {String}</code>, <br><code>[data {Object}]</code>, <br><code>fn {Function}</code>, <br><code>[ctx {Object}]</code>)</td>
<td>-</td>
<td>Служит для подписки на событие определенного типа. Обработчик выполняется единожды.</td>
</tr>
<tr>
<td></td>
<td><a href="#fields-un">un</a>(<br><code>type {String}</code>, <br><code>fn {Function}</code>, <br><code>[ctx {Object}]</code>)</td>
<td>-</td>
<td>Служит для удаления подписки на событие определенного типа.</td>
</tr>
<tr>
<td></td>
<td><a href="#fields-emit">emit</a>(<br><code>type {String</code>&#124;<code>events:Event}</code>, <br><code>[data {Object}]</code>)</td>
<td>-</td>
<td>Служит для генерации события.</td>
</tr>
</tbody>
</table>
</div><h3 id="Элементы-блока-16"><a href="#Элементы-блока-16" class="anchor"></a>Элементы блока</h3>
<div class="table-container"><table>
<thead>
<tr>
<th>Элемент</th>
<th>Способы использования</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#elems-channels">channels</a></td>
<td><code>JS</code></td>
<td>Предназначен для работы с именованными каналами событий.</td>
</tr>
</tbody>
</table>
</div><h3 id="Функции-предоставляемые-элементами-блока-1"><a href="#Функции-предоставляемые-элементами-блока-1" class="anchor"></a>Функции предоставляемые элементами блока</h3>
<div class="table-container"><table>
<thead>
<tr>
<th>Элемент</th>
<th>Функция</th>
<th>Тип возвращаемого значения</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#elems-channels">channels</a></td>
<td>channels(<br><code>[id {String}]</code>, <br><code>[drop {Boolean}]</code>)</td>
<td><code>Object</code>&#124;<code>undefined</code></td>
<td>Создает или удаляет именованный канал событий.</td>
</tr>
</tbody>
</table>
</div><h3 id="Публичные-технологии-блока-24"><a href="#Публичные-технологии-блока-24" class="anchor"></a>Публичные технологии блока</h3>
<p>Блок реализован в технологиях:</p>
<ul>
<li><code>vanilla.js</code></li>
</ul>
<h2 id="Описание-15"><a href="#Описание-15" class="anchor"></a>Описание</h2>
<p><a name="class-Event"></a></p>
<h3 id="Класс-event-1"><a href="#Класс-event-1" class="anchor"></a>Класс <code>Event</code></h3>
<p>С помощью класса можно инстанцировать объект события, указав его тип и источник. Для этого нужно воспользоваться функцией-конструктором <code>Event</code>.</p>
<p><strong>Принимаемые аргументы:</strong></p>
<ul>
<li><code>type {String}</code> – тип события. Обязательный аргумент.</li>
<li><code>target {Object}</code> – объект (источник) на котором событие возникло. Обязательный аргумент.</li>
</ul>
<p><strong>Возвращаемое значение:</strong> <code>Event</code>. Объект события.</p>
<p><a name="fields-Event"></a></p>
<h4 id="Свойства-и-методы-объекта-класса-4"><a href="#Свойства-и-методы-объекта-класса-4" class="anchor"></a>Свойства и методы объекта класса</h4>
<p><a name="fields-type"></a></p>
<h5 id="Свойство-type-1"><a href="#Свойство-type-1" class="anchor"></a>Свойство <code>type</code></h5>
<p>Тип: <code>String</code>.</p>
<p>Тип события.</p>
<pre><code class="lang-js">modules.require([&#39;events&#39;], function(events) {

    var myevent = new events.Event(&#39;myevent&#39;, this);
    console.log(myevent.type); // &#39;myevent&#39;

});
</code></pre>
<p><a name="fields-type"></a></p>
<h5 id="Свойство-target-1"><a href="#Свойство-target-1" class="anchor"></a>Свойство <code>target</code></h5>
<p>Тип: <code>Object</code>.</p>
<p>Объект, на котором возникло событие.</p>
<p><a name="fields-result"></a></p>
<h5 id="Свойство-result-1"><a href="#Свойство-result-1" class="anchor"></a>Свойство <code>result</code></h5>
<p>Тип: <code>*</code>.</p>
<p>Содержит данные, возвращаемые последней функцией-обработчиком события.</p>
<pre><code class="lang-js">modules.require([&#39;events&#39;], function(events) {

    var myEmitter = new events.Emitter();
    myEmitter.on(&#39;myevent&#39;, function() { return &#39;hi-hi-hi&#39;; });

    var myEvent = new events.Event(&#39;myevent&#39;);
    myEmitter.emit(myEvent)

    console.log(myEvent.result);    // &#39;hi-hi-hi&#39;
});
</code></pre>
<p><a name="fields-data"></a></p>
<h5 id="Свойство-data-1"><a href="#Свойство-data-1" class="anchor"></a>Свойство <code>data</code></h5>
<p>Тип: <code>*</code>.</p>
<p>Содержит данные, передаваемые функции-обработчику события в качестве аргумента.</p>
<pre><code class="lang-js">modules.require([&#39;events&#39;], function(events) {

    var myEmitter = new events.Emitter();
    myEmitter.on(&#39;myevent&#39;, &#39;my-data&#39;, function(e) { console.log(e.data); });

    myEmitter.emit(&#39;myevent&#39;); // my-data
});
</code></pre>
<p><a name="fields-preventDefault"></a></p>
<h5 id="Метод-preventdefault-1"><a href="#Метод-preventdefault-1" class="anchor"></a>Метод <code>preventDefault</code></h5>
<p>Позволяет предотвратить выполнение стандартного действия предусмотренного для события.</p>
<p>Не принимает аргументов.</p>
<p>Не имеет возвращаемого значения.</p>
<p><a name="fields-isDefaultPrevented"></a></p>
<h5 id="Метод-isdefaultprevented-1"><a href="#Метод-isdefaultprevented-1" class="anchor"></a>Метод <code>isDefaultPrevented</code></h5>
<p>Позволяет проверить было ли предотвращено выполнение стандартного действия для события.</p>
<p>Не принимает аргументов.</p>
<p><strong>Возвращаемое значение:</strong> <code>Boolean</code>. В случае, если выполнение стандартного действия было предотвращено – <code>true</code>.</p>
<p><a name="fields-stopPropagation"></a></p>
<h5 id="Метод-stoppropagation-1"><a href="#Метод-stoppropagation-1" class="anchor"></a>Метод <code>stopPropagation</code></h5>
<p>Позволяет остановить всплывание события.</p>
<p>Не принимает аргументов.</p>
<p>Не имеет возвращаемого значения.</p>
<p><a name="fields-isPropagationStopped"></a></p>
<h5 id="Метод-ispropagationstopped-1"><a href="#Метод-ispropagationstopped-1" class="anchor"></a>Метод <code>isPropagationStopped</code></h5>
<p>Позволяет проверить, было ли остановлено всплывание события.</p>
<p>Не принимает аргументов.</p>
<p><strong>Возвращаемое значение:</strong> <code>Boolean</code>. В случае, если всплывание события было остановлено – <code>true</code>.</p>
<p><a name="class-Emitter"></a></p>
<h3 id="Класс-emitter-1"><a href="#Класс-emitter-1" class="anchor"></a>Класс <code>Emitter</code></h3>
<p>Класс позволяет инстанцировать объекты, с помощью которых можно генерировать события и осуществлять подписку на них.</p>
<pre><code class="lang-js">modules.require([&#39;events&#39;], function(events) {

    var myEmitter = new events.Emitter();

});
</code></pre>
<p><a name="fields-Event"></a></p>
<h4 id="Свойства-и-методы-объекта-класса-5"><a href="#Свойства-и-методы-объекта-класса-5" class="anchor"></a>Свойства и методы объекта класса</h4>
<p><a name="fields-on"></a></p>
<h5 id="Метод-on-1"><a href="#Метод-on-1" class="anchor"></a>Метод <code>on</code></h5>
<p>Служит для подписки на событие определенного типа.</p>
<p><strong>Принимаемые аргументы:</strong></p>
<ul>
<li><code>type {String}</code> – тип события, на которое производится подписка. Обязательный аргумент.</li>
<li>[<code>data {Object}</code>] – дополнительные данные, доступные обработчику как значение поля <code>e.data</code> объекта события.</li>
<li><code>fn {Function}</code> – функция-обработчик, вызываемая для события. Обязательный аргумент.</li>
<li>[<code>ctx {Object}</code>] – контекст функции-обработчика.</li>
</ul>
<p>Возвращает объект <code>this</code>.</p>
<pre><code class="lang-js">modules.require([&#39;events&#39;], function(events) {

    var myEmitter = new events.Emitter();

    myEmitter.on(&#39;myevent&#39;, function() { console.log(&#39;foo&#39;); });
    myEmitter.emit(&#39;myevent&#39;); // &#39;foo&#39;
});
</code></pre>
<p>Кроме того, значением аргумента <code>type</code> могут быть:</p>
<ul>
<li>несколько типов событий, перечисленных через пробел – чтобы установить для них общую функцию-обработчик;</li>
</ul>
<pre><code class="lang-js">modules.require([&#39;events&#39;], function(events) {

    var myEmitter = new events.Emitter();

    myEmitter.on(&#39;myevent1 myevent2&#39;, function(e) { console.log(e.type) });

    myEmitter.emit(&#39;myevent1&#39;); // &#39;myevent1&#39;
    myEmitter.emit(&#39;myevent2&#39;); // &#39;myevent2&#39;
});
</code></pre>
<ul>
<li>хеш вида <code>{ &#39;событие-1&#39; : обработчик-1, ... , &#39;событие-n&#39; : обработчик-n }</code> – чтобы установить сразу несколько обработчиков для разных типов событий;</li>
</ul>
<pre><code class="lang-js">modules.require([&#39;events&#39;], function(events) {

    var myEmitter = new events.Emitter();

    myEmitter.on({
        myevent1 : function(e) { console.log(e.type) },
        myevent2 : function(e) { console.log(e.type) }
    });  

    myEmitter.emit(&#39;myevent1&#39;); // &#39;myevent1&#39;
    myEmitter.emit(&#39;myevent2&#39;); // &#39;myevent2&#39;
});
</code></pre>
<p>Сказанное выше верно и для методов <code>once</code> и <code>un</code>.</p>
<p><a name="fields-once"></a></p>
<h5 id="Метод-once-1"><a href="#Метод-once-1" class="anchor"></a>Метод <code>once</code></h5>
<p>Идентичен методу <code>on</code>, но выполняется единожды – после первого события подписка удаляется.</p>
<p><strong>Принимаемые аргументы:</strong></p>
<ul>
<li><code>type {String}</code> – тип события, на которое производится подписка. Обязательный аргумент.</li>
<li>[<code>data {Object}</code>] – дополнительные данные, доступные как значение поля <code>e.data</code> объекта события.</li>
<li><code>fn {Function}</code> – функция-обработчик, вызываемая для события. Обязательный аргумент.</li>
<li>[<code>ctx {Object}</code>] – контекст функции-обработчика.</li>
</ul>
<p>Возвращает объект <code>this</code>.</p>
<pre><code class="lang-js">modules.require([&#39;events&#39;], function(events) {

    var myEmitter = new events.Emitter();

    myEmitter.on(&#39;myevent&#39;, function() { console.log(&#39;foo&#39;) });

    myEmitter.emit(&#39;myevent&#39;); // &#39;foo&#39;
    myEmitter.emit(&#39;myevent&#39;); // обработчик не вызывается
});
</code></pre>
<p><a name="fields-un"></a></p>
<h5 id="Метод-un-1"><a href="#Метод-un-1" class="anchor"></a>Метод <code>un</code></h5>
<p>Служит для удаления установленной ранее подписки на событие определенного типа.</p>
<p><strong>Принимаемые аргументы:</strong></p>
<ul>
<li><code>type {String}</code> – тип события, подписка на которое удаляется. Обязательный аргумент.</li>
<li>[<code>fn {Function}</code>] – удаляемый обработчик.</li>
<li>[<code>ctx {Object}</code>] – контекст обработчика.</li>
</ul>
<p>Метод возвращает ссылку на объект <code>this</code>.</p>
<pre><code class="lang-js">modules.require([&#39;events&#39;], function(events) {

    var myEmitter = new events.Emitter(),
        shout = function() { console.log(&#39;foo&#39;) };

    myEmitter.on(&#39;myevent&#39;, shout);
    myEmitter.emit(&#39;myevent&#39;); // &#39;foo&#39;

    myEmitter.un(&#39;myevent&#39;, shout);
    myEmitter.emit(&#39;myevent&#39;); // обработчик не вызывается
});
</code></pre>
<p><a name="fields-emit"></a></p>
<h5 id="Метод-emit-1"><a href="#Метод-emit-1" class="anchor"></a>Метод <code>emit</code></h5>
<p>Служит для генерации события.</p>
<p>Метод вызывает все функции-обработчики, заданные для события.</p>
<p><strong>Принимаемые аргументы:</strong></p>
<ul>
<li><code>type {String|events:Event}</code> – генерируемое событие в виде строки или готового объекта события. Обязательный аргумент.</li>
<li>[<code>data {Object}</code>] – дополнительные данные, доступные как второй аргумент функции-обработчика.</li>
</ul>
<p>Возвращает объект <code>this</code>.</p>
<pre><code class="lang-js">modules.require([&#39;events&#39;], function(events) {

    var myEmitter = new events.Emitter();

    myEmitter.on(&#39;myevent&#39;, function(e, data) { console.log(data) });
    myEmitter.emit(&#39;myevent&#39;, &#39;ololo&#39;);  // &#39;ololo&#39;
});
</code></pre>
<h4 id="Статические-методы-класса-1"><a href="#Статические-методы-класса-1" class="anchor"></a>Статические методы класса</h4>
<p>Набор и сигнатуры статических методов идентичны набору и сигнатурам методов объекта, инстанцируемого классом.</p>

<p><a name="elems-channels"></a></p>
<h1 id="Элемент-channels-блока-events-1"><a href="#Элемент-channels-блока-events-1" class="anchor"></a>Элемент <code>channels</code> блока <code>events</code></h1>
<p>Элемент <code>channels</code> блока <code>events</code> предназначен для работы с именованными каналами событий. Именные каналы позволяют организовать работу с событиями, используя шаблон проектирования «наблюдатель» (также известный как Publisher-subscriber).</p>
<p>Элемент реализует функцию, позволяющую:</p>
<ul>
<li>получить ссылку на именной канал по <code>id</code>;</li>
<li>получить ссылку на стандартный канал;</li>
<li>удалить канал – стандартный или по <code>id</code>.</li>
</ul>
<p><strong>Принимаемые аргументы:</strong></p>
<ul>
<li>[<code>id {String}</code>] – Идентификатор канала. Если не задан будет использоваться канал по умолчанию (<code>&#39;default&#39;</code>).</li>
<li>[<code>drop {Boolean}</code>] – Логический флаг, указывающий (в значении <code>true</code>) на необходимость удалить канал. По умолчанию <code>false</code>.</li>
</ul>
<p><strong>Возвращаемое значение:</strong></p>
<ul>
<li><code>Object</code>. Объект «класса» <code>Emitter</code> – именной канал.</li>
<li><code>undefined</code>. В случае если функция была вызвана с параметром <code>drop</code> в значении <code>true</code>.</li>
</ul>
<p>Пример:</p>
<pre><code class="lang-js">modules.require([&#39;events__channels&#39;], function(channels) {

var myChannel = channels(&#39;my-channel&#39;);
myChannel.on(&#39;test&#39;, function(e, data) { console.log(data.foo) });

myChannel.emit(&#39;test&#39;, { foo : &#39;bar&#39; }); // &#39;bar&#39;

});
</code></pre>
