<h1 id="events-3"><a href="#events-3" class="anchor"></a>events</h1>
<p>This block provides a set of JS classes for working with events.</p>
<h2 id="overview-17"><a href="#overview-17" class="anchor"></a>Overview</h2>
<h3 id="classes-provided-by-the-block-1"><a href="#classes-provided-by-the-block-1" class="anchor"></a>Classes provided by the block</h3>
<div class="table-container"><table>
<thead>
<tr>
<th>Class</th>
<th>Constructor</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#class-Event">Event</a></td>
<td>Event(<br><code>type {String}</code>, <br><code>target {Object}</code>)</td>
<td>Creates the event object and changes and checks its states.</td>
</tr>
<tr>
<td><a href="#class-Emitter">Emitter</a></td>
<td>-</td>
<td>Generates events and subscriptions to them.</td>
</tr>
</tbody>
</table>
</div><h3 id="properties-and-methods-of-the-class-object-3"><a href="#properties-and-methods-of-the-class-object-3" class="anchor"></a>Properties and methods of the class object</h3>
<div class="table-container"><table>
<thead>
<tr>
<th>Class</th>
<th>Name</th>
<th>Type or return value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#class-Event">Event</a></td>
<td><a href="#fields-type">type</a></td>
<td><code>String</code></td>
<td>Type of event.</td>
</tr>
<tr>
<td></td>
<td><a href="#fields-result">result</a></td>
<td><code>*</code></td>
<td>The result returned by the event&#39;s last handler.</td>
</tr>
<tr>
<td></td>
<td><a href="#fields-target">target</a></td>
<td><code>Object</code></td>
<td>The object where the event occurred.</td>
</tr>
<tr>
<td></td>
<td><a href="#fields-data">data</a></td>
<td><code>*</code></td>
<td>Data to pass to the handler as an argument.</td>
</tr>
<tr>
<td></td>
<td><a href="#fields-preventDefault">preventDefault</a>()</td>
<td>-</td>
<td>Allows you to prevent execution of the default action for the event.</td>
</tr>
<tr>
<td></td>
<td><a href="#fields-isDefaultPrevented">isDefaultPrevented</a>()</td>
<td><code>Boolean</code></td>
<td>Checks whether the default action for the event was prevented from being executed.</td>
</tr>
<tr>
<td></td>
<td><a href="#fields-stopPropagation">stopPropagation</a>()</td>
<td>-</td>
<td>Allows you to stop event propagation.</td>
</tr>
<tr>
<td></td>
<td><a href="#fields-isPropagationStopped">isPropagationStopped</a>()</td>
<td><code>Boolean</code></td>
<td>Checks whether event propagation was stopped.</td>
</tr>
<tr>
<td><a href="#class-Emitter">Emitter</a></td>
<td><a href="#fields-on">on</a>(<br><code>type {String}</code>, <br><code>[data {Object}]</code>, <br><code>fn {Function}</code>, <br><code>[ {Object} ctx]</code>)</td>
<td>-</td>
<td>Subscribes to a specific type of event.</td>
</tr>
<tr>
<td></td>
<td><a href="#fields-once">once</a>(<br><code>type {String}</code>, <br><code>[data {Object}]</code>, <br><code>fn {Function}</code>, <br><code>[ctx {Object}]</code>)</td>
<td>-</td>
<td>Subscribes to a specific type of event. The handler executes only once.</td>
</tr>
<tr>
<td></td>
<td><a href="#fields-un">un</a>(<br><code>type {String}</code>, <br><code>fn {Function}</code>, <br><code>[ctx {Object}]</code>)</td>
<td>-</td>
<td>Unsubscribes to a specific type of event.</td>
</tr>
<tr>
<td></td>
<td><a href="#fields-emit">emit</a>(<br><code>type {String</code>&#124;<code>events:Event}</code>, <br><code>[data {Object}]</code>)</td>
<td>-</td>
<td>Generates an event.</td>
</tr>
</tbody>
</table>
</div><h3 id="elements-of-the-block-14"><a href="#elements-of-the-block-14" class="anchor"></a>Elements of the block</h3>
<div class="table-container"><table>
<thead>
<tr>
<th>Element</th>
<th>Usage</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#elems-channels">channels</a></td>
<td><code>JS</code></td>
<td>Used for working with named event channels.</td>
</tr>
</tbody>
</table>
</div><h3 id="functions-provided-by-block-elements-1"><a href="#functions-provided-by-block-elements-1" class="anchor"></a>Functions provided by block elements</h3>
<div class="table-container"><table>
<thead>
<tr>
<th>Element</th>
<th>Function</th>
<th>Return type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#elems-channels">channels</a></td>
<td>channels(<br><code>[id {String}]</code>, <br><code>[drop {Boolean}]</code>)</td>
<td><code>Object</code>&#124;<code>undefined</code></td>
<td>Creates or deletes a named event channel.</td>
</tr>
</tbody>
</table>
</div><h3 id="public-block-technologies-22"><a href="#public-block-technologies-22" class="anchor"></a>Public block technologies</h3>
<p>The block is implemented in:</p>
<ul>
<li><code>vanilla.js</code></li>
</ul>
<h2 id="description-15"><a href="#description-15" class="anchor"></a>Description</h2>
<p><a name="class-Event"></a></p>
<h3 id="event-class-1"><a href="#event-class-1" class="anchor"></a><code>Event</code> class</h3>
<p>You can use this class to instantiate an event object by indicating its type and source. To do this, use the <code>Event</code> constructor function.</p>
<p><strong>Accepted arguments:</strong></p>
<ul>
<li><code>type {String}</code> – Type of event. Required argument.</li>
<li><code>target {Object}</code> – Object (source) where the event occurred. Required argument.</li>
</ul>
<p><strong>Return value:</strong> <code>Event</code>. The event object.</p>
<p><a name="fields-Event"></a></p>
<h4 id="properties-and-methods-of-the-class-object-4"><a href="#properties-and-methods-of-the-class-object-4" class="anchor"></a>Properties and methods of the class object</h4>
<p><a name="fields-type"></a></p>
<h5 id="type-property-1"><a href="#type-property-1" class="anchor"></a><code>type</code> property</h5>
<p>Type: <code>String</code>.</p>
<p>Type of event.</p>
<pre><code class="lang-js">modules.require([&#39;events&#39;], function(events) {

    var myevent = new events.Event(&#39;myevent&#39;, this);
    console.log(myevent.type); // &#39;myevent&#39;

});
</code></pre>
<p><a name="fields-type"></a></p>
<h5 id="target-property-1"><a href="#target-property-1" class="anchor"></a><code>target</code> property</h5>
<p>Type: <code>Object</code>.</p>
<p>The object where the event occurred.</p>
<p><a name="fields-result"></a></p>
<h5 id="result-property-1"><a href="#result-property-1" class="anchor"></a><code>result</code> property</h5>
<p>Type: <code>*</code>.</p>
<p>Contains the data returned by the event&#39;s last handler function.</p>
<pre><code class="lang-js">modules.require([&#39;events&#39;], function(events) {

    var myEmitter = new events.Emitter();
    myEmitter.on(&#39;myevent&#39;, function() { return &#39;hi-hi-hi&#39;; });

    var myEvent = new events.Event(&#39;myevent&#39;);
    myEmitter.emit(myEvent)

    console.log(myEvent.result);    // &#39;hi-hi-hi&#39;
});
</code></pre>
<p><a name="fields-data"></a></p>
<h5 id="data-property-1"><a href="#data-property-1" class="anchor"></a><code>data</code> property</h5>
<p>Type: <code>*</code>.</p>
<p>Contains the data passed to the event&#39;s handler function as an argument.</p>
<pre><code class="lang-js">modules.require([&#39;events&#39;], function(events) {

    var myEmitter = new events.Emitter();
    myEmitter.on(&#39;myevent&#39;, &#39;my-data&#39;, function(e) { console.log(e.data); });

    myEmitter.emit(&#39;myevent&#39;); // my-data
});
</code></pre>
<p><a name="fields-preventDefault"></a></p>
<h5 id="preventdefault-method-1"><a href="#preventdefault-method-1" class="anchor"></a><code>preventDefault</code> method</h5>
<p>Allows you to prevent execution of the default action for the event.</p>
<p>Doesn&#39;t accept arguments.</p>
<p>No return value.</p>
<p><a name="fields-isDefaultPrevented"></a></p>
<h5 id="isdefaultprevented-method-1"><a href="#isdefaultprevented-method-1" class="anchor"></a><code>isDefaultPrevented</code> method</h5>
<p>Allows you to check whether the default action for the event was prevented from being executed.</p>
<p>Doesn&#39;t accept arguments.</p>
<p><strong>Return value:</strong> <code>Boolean</code>. If the default action for the event was prevented from being executed, it is <code>true</code>.</p>
<p><a name="fields-stopPropagation"></a></p>
<h5 id="stoppropagation-method-1"><a href="#stoppropagation-method-1" class="anchor"></a><code>stopPropagation</code> method</h5>
<p>Allows you to stop event propagation.</p>
<p>Doesn&#39;t accept arguments.</p>
<p>No return value.</p>
<p><a name="fields-isPropagationStopped"></a></p>
<h5 id="ispropagationstopped-method-1"><a href="#ispropagationstopped-method-1" class="anchor"></a><code>isPropagationStopped</code> method</h5>
<p>Allows you to check whether event propagation was stopped.</p>
<p>Doesn&#39;t accept arguments.</p>
<p><strong>Return value:</strong> <code>Boolean</code>. If event propagation was stopped, it is <code>true</code>.</p>
<p><a name="class-Emitter"></a></p>
<h3 id="emitter-class-1"><a href="#emitter-class-1" class="anchor"></a><code>Emitter</code> class</h3>
<p>This class instantiates objects that you can use for generating events and subscribing to them.</p>
<pre><code class="lang-js">modules.require([&#39;events&#39;], function(events) {

    var myEmitter = new events.Emitter();

});
</code></pre>
<p><a name="fields-Event"></a></p>
<h4 id="properties-and-methods-of-the-class-object-5"><a href="#properties-and-methods-of-the-class-object-5" class="anchor"></a>Properties and methods of the class object</h4>
<p><a name="fields-on"></a></p>
<h5 id="on-method-1"><a href="#on-method-1" class="anchor"></a><code>on</code> method</h5>
<p>Subscribes to a specific type of event.</p>
<p><strong>Accepted arguments:</strong></p>
<ul>
<li><code>type {String}</code> – The type of event being subscribed to. Required argument.</li>
<li>[<code>data {Object}</code>] – Additional data available to the handler as the value of the <code>e.data</code> field in the event object.</li>
<li><code>fn {Function}</code> – The handler function to call for the event. Required argument.</li>
<li>[<code>ctx {Object}</code>] – Context for the handler function.</li>
</ul>
<p>Returns the <code>this</code> object.</p>
<pre><code class="lang-js">modules.require([&#39;events&#39;], function(events) {

    var myEmitter = new events.Emitter();

    myEmitter.on(&#39;myevent&#39;, function() { console.log(&#39;foo&#39;); });
    myEmitter.emit(&#39;myevent&#39;); // &#39;foo&#39;
});
</code></pre>
<p>In addition, the value of the <code>type</code> argument may be:</p>
<ul>
<li>Multiple event types separated by spaces, in order to set a single handler function for all of them.</li>
</ul>
<pre><code class="lang-js">modules.require([&#39;events&#39;], function(events) {

    var myEmitter = new events.Emitter();

    myEmitter.on(&#39;myevent1 myevent2&#39;, function(e) { console.log(e.type) });

    myEmitter.emit(&#39;myevent1&#39;); // &#39;myevent1&#39;
    myEmitter.emit(&#39;myevent2&#39;); // &#39;myevent2&#39;
});
</code></pre>
<ul>
<li>A hash of <code>{ &#39;event-1&#39; : handler-1, ... , &#39;event-n&#39; : handler-n }</code>, in order to set multiple handlers for different event types.</li>
</ul>
<pre><code class="lang-js">modules.require([&#39;events&#39;], function(events) {

    var myEmitter = new events.Emitter();

    myEmitter.on({
        myevent1 : function(e) { console.log(e.type) },
        myevent2 : function(e) { console.log(e.type) }
    });  

    myEmitter.emit(&#39;myevent1&#39;); // &#39;myevent1&#39;
    myEmitter.emit(&#39;myevent2&#39;); // &#39;myevent2&#39;
});
</code></pre>
<p>The same is true for the <code>once</code> and <code>un</code> methods.</p>
<p><a name="fields-once"></a></p>
<h5 id="once-method-1"><a href="#once-method-1" class="anchor"></a><code>once</code> method</h5>
<p>Identical to the <code>on</code> method, but it only executes once. After the first event, the subscription is removed.</p>
<p><strong>Accepted arguments:</strong></p>
<ul>
<li><code>type {String}</code> – The type of event being subscribed to. Required argument.</li>
<li>[<code>data {Object}</code>] – Additional data available as the value of the <code>e.data</code> field in the event object.</li>
<li><code>fn {Function}</code> – The handler function to call for the event. Required argument.</li>
<li>[<code>ctx {Object}</code>] – Context for the handler function.</li>
</ul>
<p>Returns the <code>this</code> object.</p>
<pre><code class="lang-js">modules.require([&#39;events&#39;], function(events) {

    var myEmitter = new events.Emitter();

    myEmitter.on(&#39;myevent&#39;, function() { console.log(&#39;foo&#39;) });

    myEmitter.emit(&#39;myevent&#39;); // &#39;foo&#39;
    myEmitter.emit(&#39;myevent&#39;); //handler isn&#39;t called
});
</code></pre>
<p><a name="fields-un"></a></p>
<h5 id="un-method-1"><a href="#un-method-1" class="anchor"></a><code>un</code> method</h5>
<p>Removes a previously set subscription to a specific type of event.</p>
<p><strong>Accepted arguments:</strong></p>
<ul>
<li><code>type {String}</code> – The type of event being unsubscribed from. Required argument.</li>
<li>[<code>fn {Function}</code>] – The handler to delete.</li>
<li>[<code>ctx {Object}</code>] – The handler context.</li>
</ul>
<p>The method returns a reference to the <code>this</code> object.</p>
<pre><code class="lang-js">modules.require([&#39;events&#39;], function(events) {

    var myEmitter = new events.Emitter(),
        shout = function() { console.log(&#39;foo&#39;) };

    myEmitter.on(&#39;myevent&#39;, shout);
    myEmitter.emit(&#39;myevent&#39;); // &#39;foo&#39;

    myEmitter.un(&#39;myevent&#39;, shout);
    myEmitter.emit(&#39;myevent&#39;); //handler isn&#39;t called
});
</code></pre>
<p><a name="fields-emit"></a></p>
<h5 id="emit-method-1"><a href="#emit-method-1" class="anchor"></a><code>emit</code> method</h5>
<p>Generates an event.</p>
<p>This method calls all the handler functions set for the event.</p>
<p><strong>Accepted arguments:</strong></p>
<ul>
<li><code>type {String|events:Event}</code> – The event to generate, in the form of a string or a prepared event object. Required argument.</li>
<li>[<code>data {Object}</code>] – Additional data available as the second argument of the handler function.</li>
</ul>
<p>Returns the <code>this</code> object.</p>
<pre><code class="lang-js">modules.require([&#39;events&#39;], function(events) {

    var myEmitter = new events.Emitter();

    myEmitter.on(&#39;myevent&#39;, function(e, data) { console.log(data) });
    myEmitter.emit(&#39;myevent&#39;, &#39;ololo&#39;);  // &#39;ololo&#39;
});
</code></pre>
<h4 id="static-methods-of-the-class-1"><a href="#static-methods-of-the-class-1" class="anchor"></a>Static methods of the class</h4>
<p>The set of static methods and their signatures is exactly the same as for the methods of the object being instantiated by the class.</p>

<p><a name="elems-channels"></a></p>
<h1 id="channels-element-in-the-events-block-1"><a href="#channels-element-in-the-events-block-1" class="anchor"></a><code>channels</code> element in the <code>events</code> block</h1>
<p>Use the <code>channels</code> element in the <code>events</code> block for working with named event channels. Named channels allow you to work with events using the observer pattern (also known as the publish-subscribe pattern).</p>
<p>This element implements a function to:</p>
<ul>
<li>Get a reference to a named channel by its <code>id</code>.</li>
<li>Get a reference to a standard channel.</li>
<li>Remove a standard channel or a named channel with an <code>id</code>.</li>
</ul>
<p><strong>Accepted arguments:</strong></p>
<ul>
<li>[<code>id {String}</code>] – Channel ID. If omitted, the default channel is used (<code>&#39;default&#39;</code>).</li>
<li>[<code>drop {Boolean}</code>] – A boolean flag to remove the channel (when <code>true</code>). By default, <code>false</code>.</li>
</ul>
<p><strong>Returned value:</strong></p>
<ul>
<li><code>Object</code>. Object of the <code>Emitter</code> &quot;class&quot; – a named channel.</li>
<li><code>undefined</code>. If the function was called with the <code>drop</code> parameter set to <code>true</code>.</li>
</ul>
<p>Example:</p>
<pre><code class="lang-js">modules.require([&#39;events__channels&#39;], function(channels) {

var myChannel = channels(&#39;my-channel&#39;);
myChannel.on(&#39;test&#39;, function(e, data) { console.log(data.foo) });

myChannel.emit(&#39;test&#39;, { foo : &#39;bar&#39; }); // &#39;bar&#39;

});
</code></pre>
